<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary Meta -->
  <title>Den Niwa</title>
  <meta name="description" content="Selected works." />

  <!-- Open Graph (WhatsApp / iMessage / Slack) -->
  <meta property="og:title" content="Den Niwa" />
  <meta property="og:description" content="Selected works." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://den-niwa.github.io/" />
  <meta property="og:image" content="https://den-niwa.github.io/og.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter (text-first card) -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Den Niwa" />
  <meta name="twitter:description" content="Selected works." />

  <!-- Favicons -->
  <link rel="icon" href="/smiley.png" sizes="any">
  <link rel="icon" type="image/png" href="/smiley.png" sizes="512x512">
  <link rel="apple-touch-icon" href="/smiley.png">
  <link rel="icon" href="/favicon.ico">

  <style>
    :root { --pad: 18px; }

    html, body {
      height: 100%;
      margin: 0;
      background: #fff;
      color: #111;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    /* Bottom-left name */
    .label-left {
      position: fixed;
      bottom: 36px;
      left: 36px;
      font-size: 11px;
      letter-spacing: 0.3px;
      opacity: 0.85;
      z-index: 10;
    }

    /* Bottom-right email */
    .label-right {
      position: fixed;
      bottom: 36px;
      right: 36px;
      font-size: 11px;
      letter-spacing: 0.3px;
      opacity: 0.85;
      z-index: 10;
    }

    .label-right a {
      color: inherit;
      text-decoration: none;
      opacity: 0.75;
    }
    .label-right a:hover { opacity: 1; }

    /* Counter centered below image */
    #counter {
      position: fixed;
      bottom: 28px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      letter-spacing: 0.3px;
      opacity: 0.6;
      user-select: none;
      z-index: 10;
    }

    /* Fullscreen stage for the single image */
    .stage {
      height: 100%;
      display: grid;
      place-items: center;
      padding: 90px;
      box-sizing: border-box;
      position: relative;
      z-index: 6; /* above click zones so image hover works */
    }

    img {
      max-width: 100%;
      max-height: calc(100vh - 180px);
      object-fit: contain;
      display: block;

      /* download friction */
      -webkit-user-drag: none;
      user-select: none;
      -webkit-touch-callout: none;
    }

    /* Invisible click zones */
    .zone {
      position: fixed;
      top: 0;
      bottom: 0;
      width: 50%;
      z-index: 5;
      /* no cursor here, so cursor feedback is image-only */
    }
    .zone.left { left: 0; }
    .zone.right { right: 0; }

    /* Desktop cursor only on image */
    @media (hover: hover) and (pointer: fine) {
      img { cursor: e-resize; }
    }

    @media (max-width: 900px) {
      .stage { padding: 80px; }
      img { max-height: calc(100vh - 120px); }
      #counter { display: none; }
    }

    @media (max-width: 600px) {
      .stage { padding: 36px; }
      img { max-height: calc(100vh - 48px); }
      .label-left, .label-right { font-size: 11px; }
    }

    /* extra safety: hide counter on touch devices */
    @media (hover: none) and (pointer: coarse) {
      #counter { display: none; }
    }
  </style>
</head>

<body>
  <div class="label-left">
    <div>Den Niwa</div>
  </div>

  <div class="label-right">
    <a href="mailto:hi@den-niwa.github.io">fuckyou@den-niwa.github.io</a>
  </div>

  <div id="counter">01</div>

  <div class="stage">
    <img id="photo" alt="Gallery image" />
  </div>

  <div class="zone left" aria-label="Previous image"></div>
  <div class="zone right" aria-label="Next image"></div>

  <script>
     const images = [
    "images/01.jpg",
    "images/02.jpg",
    "images/03.jpg"
  ];

    let imageIndex = 0;
    const img = document.getElementById("photo");

    // download friction
    img.setAttribute("draggable", "false");
    img.addEventListener("dragstart", (e) => e.preventDefault());
    img.addEventListener("contextmenu", (e) => e.preventDefault());

    function preload(src) {
      const pre = new Image();
      pre.src = src;
    }

    function preloadNextTwo() {
      const next1 = (imageIndex + 1) % images.length;
      const next2 = (imageIndex + 2) % images.length;
      preload(images[next1]);
      preload(images[next2]);
    }

    function updateCounter() {
      document.getElementById("counter").textContent =
        String(imageIndex + 1).padStart(2, "0");
    }

    function next() {
      imageIndex = (imageIndex + 1) % images.length;
      img.src = images[imageIndex];
      preloadNextTwo();
      updateCounter();
    }

    // click on image advances
    img.addEventListener("click", next);

    // random entry
    imageIndex = Math.floor(Math.random() * images.length);
    img.src = images[imageIndex];
    updateCounter();
    preloadNextTwo();

    // click margins advances
    document.querySelector(".zone.left").addEventListener("click", next);
    document.querySelector(".zone.right").addEventListener("click", next);

    // keyboard
    window.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft" || e.key === "ArrowRight") next();
    });

    // swipe
    let startX = null;
    window.addEventListener("touchstart", (e) => {
      startX = e.touches[0].clientX;
    }, { passive: true });

    window.addEventListener("touchend", (e) => {
      if (startX === null) return;
      const endX = e.changedTouches[0].clientX;
      if (Math.abs(endX - startX) > 40) next();
      startX = null;
    }, { passive: true });
  </script>
</body>
</html>
